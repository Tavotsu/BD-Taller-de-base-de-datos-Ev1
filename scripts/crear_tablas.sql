-- DDL para crear la estructura de tablas en Oracle

-- Tabla CLUB
CREATE TABLE CLUB (
    ID_CLUB     NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOMBRE      VARCHAR2(100) NOT NULL
);

-- Tabla PROYECTO
CREATE TABLE PROYECTO (
    ID_PROYECTO NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOMBRE      VARCHAR2(150) NOT NULL
);

-- Tabla ESTUDIANTE
CREATE TABLE ESTUDIANTE (
    NUMRUN      NUMBER(8) NOT NULL PRIMARY KEY,
    DV_RUN      CHAR(1) NOT NULL,
    PNOMBRE     VARCHAR2(50) NOT NULL,
    SNOMBRE     VARCHAR2(50),
    PAPELLIDO   VARCHAR2(50) NOT NULL,
    MAPELLIDO   VARCHAR2(50),
    FEC_NAC     DATE NOT NULL
);

-- Tabla intermedia para la relación N:M entre Estudiante y Club
CREATE TABLE ESTUDIANTE_CLUB (
    ID_ESTUDIANTE_CLUB  NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NUMRUN_ESTUDIANTE   NUMBER(8) NOT NULL,
    ID_CLUB             NUMBER(10) NOT NULL,
    CONSTRAINT fk_estudiante_club_est FOREIGN KEY (NUMRUN_ESTUDIANTE) REFERENCES ESTUDIANTE(NUMRUN),
    CONSTRAINT fk_estudiante_club_club FOREIGN KEY (ID_CLUB) REFERENCES CLUB(ID_CLUB)
);

-- Tabla intermedia para la relación N:M entre Estudiante y Proyecto
CREATE TABLE ESTUDIANTE_PROYECTO (
    ID_ESTUDIANTE_PROYECTO  NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NUMRUN_ESTUDIANTE       NUMBER(8) NOT NULL,
    ID_PROYECTO             NUMBER(10) NOT NULL,
    CONSTRAINT fk_estudiante_proy_est FOREIGN KEY (NUMRUN_ESTUDIANTE) REFERENCES ESTUDIANTE(NUMRUN),
    CONSTRAINT fk_estudiante_proy_proy FOREIGN KEY (ID_PROYECTO) REFERENCES PROYECTO(ID_PROYECTO)
);